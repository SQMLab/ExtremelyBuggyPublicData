{
    "origin": "codeshovel",
    "repositoryName": "jgit",
    "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/jgit/.git",
    "startCommitName": "HEAD",
    "sourceFileName": "ObjectDirectory.java",
    "functionName": "handlePackError",
    "functionId": "handlePackError___e-IOException__p-PackFile",
    "sourceFilePath": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
    "functionStartLine": 617,
    "functionEndLine": 654,
    "numCommitsSeen": 52,
    "timeTaken": 3411,
    "changeHistory": [
        "27ee3342136a588adbc1eee4b333179d8f6f1aa7",
        "f5936405a3a66b821f716e551de6ee4c1c33ca0b",
        "c18694e0d1c122a2f95537fd9254fb075d2e0bc2",
        "d3a73c1407f8936cb45516da8d3a2d4dd43c6379",
        "ae4b72d50e84f9af7978075d4919ad4d2b1d018a",
        "cb08dd8b14bf4900c7974dd1ce5a3d553016585a",
        "d2faec27a7af7c9ea7db6b4ac31f75533ca45b80",
        "a33663fd4edce3585ff20c842f297e60e0e9af85",
        "4c558225dc991a34d59bc4fb0d4e6f1f6974f53c",
        "962babc4b27ffd90058fe7734f17ed1c4e77d958",
        "9665d86ba1dd2937ca26f6aba63bb16aa277f888",
        "997d785418d55dce5a1188fdb95e6d2b4ab0bde5",
        "baf1bb20d02f60d001a4d77d9749f845d4ada45e",
        "e6fd4732d0836f54e97dd87e7a1c15862d789376",
        "7b3ee6f62e0cd0d3437abb12f9488dedd8af5125",
        "d6e00d201514ce69addcbfb1c7163f42336f3e66"
    ],
    "changeHistoryShort": {
        "d6e00d201514ce69addcbfb1c7163f42336f3e66": "Ybodychange",
        "7b3ee6f62e0cd0d3437abb12f9488dedd8af5125": "Ybodychange",
        "e6fd4732d0836f54e97dd87e7a1c15862d789376": "Ybodychange",
        "baf1bb20d02f60d001a4d77d9749f845d4ada45e": "Ybodychange",
        "997d785418d55dce5a1188fdb95e6d2b4ab0bde5": "Ybodychange",
        "9665d86ba1dd2937ca26f6aba63bb16aa277f888": "Ybodychange",
        "962babc4b27ffd90058fe7734f17ed1c4e77d958": "Ybodychange",
        "4c558225dc991a34d59bc4fb0d4e6f1f6974f53c": "Ybodychange",
        "a33663fd4edce3585ff20c842f297e60e0e9af85": "Ybodychange",
        "d2faec27a7af7c9ea7db6b4ac31f75533ca45b80": "Ybodychange",
        "cb08dd8b14bf4900c7974dd1ce5a3d553016585a": "Ybodychange",
        "ae4b72d50e84f9af7978075d4919ad4d2b1d018a": "Ybodychange",
        "d3a73c1407f8936cb45516da8d3a2d4dd43c6379": "Ybodychange",
        "c18694e0d1c122a2f95537fd9254fb075d2e0bc2": "Ybodychange",
        "f5936405a3a66b821f716e551de6ee4c1c33ca0b": "Ybodychange",
        "27ee3342136a588adbc1eee4b333179d8f6f1aa7": "Yintroduced"
    },
    "changeHistoryDetails": {
        "d6e00d201514ce69addcbfb1c7163f42336f3e66": {
            "type": "Ybodychange",
            "commitMessage": "Remember the cause for invalidating a packfile\n\nKeep track of the original cause for a packfile invalidation.\nIt is needed for the sysadmin to understand if there is a real\nunderlying filesystem problem and repository corruption or if it is\nsimply a consequence of a concurrency of Git operations (e.g. repack\nor GC).\n\nChange-Id: I06ddda9ec847844ec31616ab6d17f153a5a34e33\nSigned-off-by: Luca Milanesio <luca.milanesio@gmail.com>\nSigned-off-by: David Pursehouse <david.pursehouse@gmail.com>\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>\n",
            "commitDate": "11/04/19 1:55 AM",
            "commitName": "d6e00d201514ce69addcbfb1c7163f42336f3e66",
            "commitAuthor": "Luca Milanesio",
            "commitDateOld": "09/04/19 6:31 AM",
            "commitNameOld": "82b1af31e295273eeedd82fc5db3266c909c9e80",
            "commitAuthorOld": "Luca Milanesio",
            "daysBetweenCommits": 1.81,
            "commitsBetweenForRepo": 2,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,41 +1,36 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tint transientErrorCount = 0;\n \t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\terrTmpl = JGitText.get().packInaccessible;\n \t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t\tremovePack(p);\n \t\t\t}\n \t\t} else if (FileUtils.isStaleFileHandle(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n-\t\t\tif (LOG.isDebugEnabled()) {\n-\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n-\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n-\t\t\t} else {\n-\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n-\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n-\t\t\t}\n+\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n+\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t} else {\n \t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n \t\t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t\t// transient.\n \t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n \t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n \t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandle(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "7"
        },
        "7b3ee6f62e0cd0d3437abb12f9488dedd8af5125": {
            "type": "Ybodychange",
            "commitMessage": "Fix error log message in ObjectDirectory.handlePackError()\n\nChange-Id: I154f392ad025c4b642eb1123d375a0afaa853885\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>\n(cherry picked from commit 997d785418d55dce5a1188fdb95e6d2b4ab0bde5)\n",
            "commitDate": "05/03/19 5:36 PM",
            "commitName": "7b3ee6f62e0cd0d3437abb12f9488dedd8af5125",
            "commitAuthor": "Matthias Sohn",
            "commitDateOld": "05/03/19 5:36 PM",
            "commitNameOld": "e6fd4732d0836f54e97dd87e7a1c15862d789376",
            "commitAuthorOld": "David Pursehouse",
            "daysBetweenCommits": 0.0,
            "commitsBetweenForRepo": 4,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,43 +1,43 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tint transientErrorCount = 0;\n \t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\terrTmpl = JGitText.get().packInaccessible;\n \t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t\tremovePack(p);\n \t\t\t}\n \t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n \t\t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t\t// transient.\n \t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n-\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n-\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n+\t\t\t\t\t\tp.getPackFile().getAbsolutePath(),\n+\t\t\t\t\t\tInteger.valueOf(transientErrorCount)), e);\n \t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath(),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount)), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "1",
            "TangledWMoveandFileRename": "1"
        },
        "e6fd4732d0836f54e97dd87e7a1c15862d789376": {
            "type": "Ybodychange",
            "commitMessage": "ObjectDirectory: Clean up logging\n\nExternalize the message and log the pack file with absolute path.\n\nChange-Id: I019052dfae8fd96ab67da08b3287d699287004cb\nSigned-off-by: David Pursehouse <david.pursehouse@gmail.com>\n(cherry picked from commit 9665d86ba1dd2937ca26f6aba63bb16aa277f888)\n",
            "commitDate": "05/03/19 5:36 PM",
            "commitName": "e6fd4732d0836f54e97dd87e7a1c15862d789376",
            "commitAuthor": "David Pursehouse",
            "commitDateOld": "05/03/19 5:36 PM",
            "commitNameOld": "baf1bb20d02f60d001a4d77d9749f845d4ada45e",
            "commitAuthorOld": "Luca Milanesio",
            "daysBetweenCommits": 0.0,
            "commitsBetweenForRepo": 2,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,42 +1,43 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tint transientErrorCount = 0;\n \t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n-\t\t\tLOG.warn(\"Packfile \" + p.getPackFile() + \" is corrupted\", e);\n+\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n+\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\terrTmpl = JGitText.get().packInaccessible;\n \t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t\tremovePack(p);\n \t\t\t}\n \t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n \t\t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t\t// transient.\n \t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n \t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n \t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "2"
        },
        "baf1bb20d02f60d001a4d77d9749f845d4ada45e": {
            "type": "Ybodychange",
            "commitMessage": "ObjectDirectory: extra logging on packfile exceptions\n\nDisplay extra logging, including the exception with the associated\nstacktrace, whenever a packFile can't be read and thus removed\nfrom the packlist.\n\nChange-Id: I97a4e31dc427bfcc0baae438dcbe2dcd4704b824\nSigned-off-by: Luca Milanesio <luca.milanesio@gmail.com>\n(cherry picked from commit 962babc4b27ffd90058fe7734f17ed1c4e77d958)\n",
            "commitDate": "05/03/19 5:36 PM",
            "commitName": "baf1bb20d02f60d001a4d77d9749f845d4ada45e",
            "commitAuthor": "Luca Milanesio",
            "commitDateOld": "01/11/17 9:40 AM",
            "commitNameOld": "f7ceeaa23f98f671848a8446c324d0d96800d5db",
            "commitAuthorOld": "Dave Borowitz",
            "daysBetweenCommits": 489.37,
            "commitsBetweenForRepo": 113,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,41 +1,42 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tint transientErrorCount = 0;\n \t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n+\t\t\tLOG.warn(\"Packfile \" + p.getPackFile() + \" is corrupted\", e);\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\terrTmpl = JGitText.get().packInaccessible;\n \t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t\tremovePack(p);\n \t\t\t}\n \t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n \t\t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t\t// transient.\n \t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n \t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n \t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\tLOG.warn(\"Packfile \" + p.getPackFile() + \" is corrupted\", e);\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "2"
        },
        "997d785418d55dce5a1188fdb95e6d2b4ab0bde5": {
            "type": "Ybodychange",
            "commitMessage": "Fix error log message in ObjectDirectory.handlePackError()\n\nChange-Id: I154f392ad025c4b642eb1123d375a0afaa853885\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>",
            "commitDate": "04/03/19 4:51 AM",
            "commitName": "997d785418d55dce5a1188fdb95e6d2b4ab0bde5",
            "commitAuthor": "Matthias Sohn",
            "commitDateOld": "02/03/19 8:15 PM",
            "commitNameOld": "9665d86ba1dd2937ca26f6aba63bb16aa277f888",
            "commitAuthorOld": "David Pursehouse",
            "daysBetweenCommits": 1.36,
            "commitsBetweenForRepo": 4,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,43 +1,43 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tint transientErrorCount = 0;\n \t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\terrTmpl = JGitText.get().packInaccessible;\n \t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t\tremovePack(p);\n \t\t\t}\n \t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n \t\t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t\t// transient.\n \t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n-\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n-\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n+\t\t\t\t\t\tp.getPackFile().getAbsolutePath(),\n+\t\t\t\t\t\tInteger.valueOf(transientErrorCount)), e);\n \t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath(),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount)), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "1",
            "TangledWMoveandFileRename": "1"
        },
        "9665d86ba1dd2937ca26f6aba63bb16aa277f888": {
            "type": "Ybodychange",
            "commitMessage": "ObjectDirectory: Clean up logging\n\nExternalize the message and log the pack file with absolute path.\n\nChange-Id: I019052dfae8fd96ab67da08b3287d699287004cb\nSigned-off-by: David Pursehouse <david.pursehouse@gmail.com>\n",
            "commitDate": "02/03/19 8:15 PM",
            "commitName": "9665d86ba1dd2937ca26f6aba63bb16aa277f888",
            "commitAuthor": "David Pursehouse",
            "commitDateOld": "13/02/19 5:44 PM",
            "commitNameOld": "962babc4b27ffd90058fe7734f17ed1c4e77d958",
            "commitAuthorOld": "Luca Milanesio",
            "daysBetweenCommits": 17.11,
            "commitsBetweenForRepo": 2,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,42 +1,43 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tint transientErrorCount = 0;\n \t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n-\t\t\tLOG.warn(\"Packfile \" + p.getPackFile() + \" is corrupted\", e);\n+\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n+\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\terrTmpl = JGitText.get().packInaccessible;\n \t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t\tremovePack(p);\n \t\t\t}\n \t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n \t\t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t\t// transient.\n \t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n \t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n \t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "2"
        },
        "962babc4b27ffd90058fe7734f17ed1c4e77d958": {
            "type": "Ybodychange",
            "commitMessage": "ObjectDirectory: extra logging on packfile exceptions\n\nDisplay extra logging, including the exception with the associated\nstacktrace, whenever a packFile can't be read and thus removed\nfrom the packlist.\n\nChange-Id: I97a4e31dc427bfcc0baae438dcbe2dcd4704b824\nSigned-off-by: Luca Milanesio <luca.milanesio@gmail.com>\n",
            "commitDate": "13/02/19 5:44 PM",
            "commitName": "962babc4b27ffd90058fe7734f17ed1c4e77d958",
            "commitAuthor": "Luca Milanesio",
            "commitDateOld": "22/08/18 10:34 PM",
            "commitNameOld": "2fc00af44e5658cf34200ad20d777a75333a0564",
            "commitAuthorOld": "Michael Keppler",
            "daysBetweenCommits": 174.84,
            "commitsBetweenForRepo": 137,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,41 +1,42 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tint transientErrorCount = 0;\n \t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n+\t\t\tLOG.warn(\"Packfile \" + p.getPackFile() + \" is corrupted\", e);\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\terrTmpl = JGitText.get().packInaccessible;\n \t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t\tremovePack(p);\n \t\t\t}\n \t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n \t\t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t\t// transient.\n \t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n \t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n \t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\tLOG.warn(\"Packfile \" + p.getPackFile() + \" is corrupted\", e);\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "2"
        },
        "4c558225dc991a34d59bc4fb0d4e6f1f6974f53c": {
            "type": "Ybodychange",
            "commitMessage": "Don't remove pack when FileNotFoundException is transient\n\nThe FileNotFoundException is typically raised in three conditions:\n1. file doesn't exist\n2. incompatible read vs. read/write open modes\n3. filesystem locking\n4. temporary lack of resources (e.g. too many open files)\n\n1. is already managed, 2. would never happen as packs are not\noverwritten while with 3. and 4. it is worth logging the exception and\nretrying to read the pack again.\n\nLog transient errors using an exponential backoff strategy to avoid\nflooding the logs with the same error if consecutive retries to access\nthe pack fail repeatedly.\n\nBug: 513435\nChange-Id: I03c6f6891de3c343d3d517092eaa75dba282c0cd\nSigned-off-by: Luca Milanesio <luca.milanesio@gmail.com>\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>\n",
            "commitDate": "15/03/17 3:43 PM",
            "commitName": "4c558225dc991a34d59bc4fb0d4e6f1f6974f53c",
            "commitAuthor": "Luca Milanesio",
            "commitDateOld": "30/12/15 2:22 PM",
            "commitNameOld": "3fc93f8a562e96d354546ad6ff8c9dd56709c5e5",
            "commitAuthorOld": "Matthias Sohn",
            "daysBetweenCommits": 441.01,
            "commitsBetweenForRepo": 427,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,34 +1,41 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n+\t\tint transientErrorCount = 0;\n+\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n-\t\t\t\twarnTmpl = JGitText.get().packInaccessible;\n+\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n+\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n+\t\t\t\tremovePack(p);\n \t\t\t}\n-\t\t\tremovePack(p);\n \t\t} else if (FileUtils.isStaleFileHandle(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n+\t\t} else {\n+\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n-\t\t\t// Don't remove the pack from the list, as the error may be\n-\t\t\t// transient.\n-\t\t\tLOG.error(MessageFormat.format(\n-\t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n-\t\t\t\t\t\t\t.getAbsolutePath()), e);\n+\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n+\t\t\t\t// Don't remove the pack from the list, as the error may be\n+\t\t\t\t// transient.\n+\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n+\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n+\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n+\t\t\t}\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tint transientErrorCount = 0;\n\t\tString errTmpl = JGitText.get().exceptionWhileReadingPack;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\terrTmpl = JGitText.get().packInaccessible;\n\t\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t\tremovePack(p);\n\t\t\t}\n\t\t} else if (FileUtils.isStaleFileHandle(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttransientErrorCount = p.incrementTransientErrorCount();\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\tif (doLogExponentialBackoff(transientErrorCount)) {\n\t\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t\t// transient.\n\t\t\t\tLOG.error(MessageFormat.format(errTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()),\n\t\t\t\t\t\tInteger.valueOf(transientErrorCount), e);\n\t\t\t}\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "8"
        },
        "a33663fd4edce3585ff20c842f297e60e0e9af85": {
            "type": "Ybodychange",
            "commitMessage": "Detect stale-file-handle error in causal chain\n\nCover the case where the exception is wrapped up as a\ncause, e.g., PackIndex#open(File).\n\nChange-Id: I0df5b1e9c2ff886bdd84dee3658b6a50866699d1\nSigned-off-by: Hongkai Liu <hongkai.liu@ericsson.com>\n",
            "commitDate": "30/01/17 6:36 PM",
            "commitName": "a33663fd4edce3585ff20c842f297e60e0e9af85",
            "commitAuthor": "Hongkai Liu",
            "commitDateOld": "19/01/17 2:00 AM",
            "commitNameOld": "91132bb05e767694d35230d515443d54ddc4eff6",
            "commitAuthorOld": "James Melvin",
            "daysBetweenCommits": 11.69,
            "commitsBetweenForRepo": 29,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,34 +1,34 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\tif (p.getPackFile().exists()) {\n \t\t\t\twarnTmpl = JGitText.get().packInaccessible;\n \t\t\t} else {\n \t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\t}\n \t\t\tremovePack(p);\n-\t\t} else if (FileUtils.isStaleFileHandle(e)) {\n+\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t// transient.\n \t\t\tLOG.error(MessageFormat.format(\n \t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n \t\t\t\t\t\t\t.getAbsolutePath()), e);\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\twarnTmpl = JGitText.get().packInaccessible;\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t}\n\t\t\tremovePack(p);\n\t\t} else if (FileUtils.isStaleFileHandleInCausalChain(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t\tLOG.error(MessageFormat.format(\n\t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n\t\t\t\t\t\t\t.getAbsolutePath()), e);\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "2"
        },
        "d2faec27a7af7c9ea7db6b4ac31f75533ca45b80": {
            "type": "Ybodychange",
            "commitMessage": "Raise error if FileNotFoundException is caught for an existing file\n\nFile, FileInputStream and friends may throw FileNotFoundException even\nif the file is existing e.g. when file permissions don't allow to access\nthe file content. In most cases this is a severe error we should not\nsuppress hence rethrow the FileNotFoundException in this case.\n\nThis may also fix bug 451508.\n\nBug: 451508\nChange-Id: If4a94217fb5b7cfd4c04d881902f3e86193c7008\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>",
            "commitDate": "24/11/15 12:54 PM",
            "commitName": "d2faec27a7af7c9ea7db6b4ac31f75533ca45b80",
            "commitAuthor": "Matthias Sohn",
            "commitDateOld": "28/08/15 4:09 AM",
            "commitNameOld": "05acf1c62f415e263d835ae991268e97e7f7ced3",
            "commitAuthorOld": "Matthias Sohn",
            "daysBetweenCommits": 88.41,
            "commitsBetweenForRepo": 119,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,30 +1,34 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n-\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n+\t\t\tif (p.getPackFile().exists()) {\n+\t\t\t\twarnTmpl = JGitText.get().packInaccessible;\n+\t\t\t} else {\n+\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n+\t\t\t}\n \t\t\tremovePack(p);\n \t\t} else if (FileUtils.isStaleFileHandle(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t// transient.\n \t\t\tLOG.error(MessageFormat.format(\n \t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n \t\t\t\t\t\t\t.getAbsolutePath()), e);\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\tif (p.getPackFile().exists()) {\n\t\t\t\twarnTmpl = JGitText.get().packInaccessible;\n\t\t\t} else {\n\t\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\t}\n\t\t\tremovePack(p);\n\t\t} else if (FileUtils.isStaleFileHandle(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t\tLOG.error(MessageFormat.format(\n\t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n\t\t\t\t\t\t\t.getAbsolutePath()), e);\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "13"
        },
        "cb08dd8b14bf4900c7974dd1ce5a3d553016585a": {
            "type": "Ybodychange",
            "commitMessage": "Add public isStaleFileHandle() API, improve detection.\n\nAdd a public API to the FileUtils to determine if an IOException is a\nstale NFS file handle exception.  This will make it easier to detect\nsuch errors, and interpret them consistently throughout the codebase.\nThis new API is a bit more lenient in its detection than the previous\ndetection, and should be able to detect some errors which previously\nwere not identified as stale file handle exceptions because they had the\nword NFS in the error message.  Adjust the packfile handling code to use\nthis new API for detection.\n\nChange-Id: I21f80014546ba1afec7335890e5ae79e7f521412\nSigned-off-by: Martin Fick<mfick@codeaurora.org>\n",
            "commitDate": "25/08/15 7:19 AM",
            "commitName": "cb08dd8b14bf4900c7974dd1ce5a3d553016585a",
            "commitAuthor": "Martin Fick",
            "commitDateOld": "30/04/15 7:21 AM",
            "commitNameOld": "ae4b72d50e84f9af7978075d4919ad4d2b1d018a",
            "commitAuthorOld": "Hugo Ar\u00e8s",
            "daysBetweenCommits": 117.0,
            "commitsBetweenForRepo": 210,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,31 +1,30 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\tremovePack(p);\n-\t\t} else if (e.getMessage() != null\n-\t\t\t\t&& e.getMessage().toLowerCase().contains(STALE_FILE_HANDLE_MSG)) {\n+\t\t} else if (FileUtils.isStaleFileHandle(e)) {\n \t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n \t\t\tremovePack(p);\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t// transient.\n \t\t\tLOG.error(MessageFormat.format(\n \t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n \t\t\t\t\t\t\t.getAbsolutePath()), e);\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\tremovePack(p);\n\t\t} else if (FileUtils.isStaleFileHandle(e)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t\tLOG.error(MessageFormat.format(\n\t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n\t\t\t\t\t\t\t.getAbsolutePath()), e);\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "2"
        },
        "ae4b72d50e84f9af7978075d4919ad4d2b1d018a": {
            "type": "Ybodychange",
            "commitMessage": "Remove pack from list when file handle is stale\n\nThis error happens on nfs file system when you try to read a file that\nwas deleted or replaced.\n\nWhen the error happens because the file was deleted, removing it from\nthe list is the proper way to handle the error, same use case as\nFileNotFoundException. When the error happens because the file was\nreplaced, removing the file from the list will cause the file to be\nre-read so it will get the latest version of the file.\n\nBug: 462868\nChange-Id: I368af61a6cf73706601a3e4df4ef24f0aa0465c5\nSigned-off-by: Hugo Ar\u00e8s <hugo.ares@ericsson.com>",
            "commitDate": "30/04/15 7:21 AM",
            "commitName": "ae4b72d50e84f9af7978075d4919ad4d2b1d018a",
            "commitAuthor": "Hugo Ar\u00e8s",
            "commitDateOld": "30/04/15 7:21 AM",
            "commitNameOld": "d3a73c1407f8936cb45516da8d3a2d4dd43c6379",
            "commitAuthorOld": "Hugo Ar\u00e8s",
            "daysBetweenCommits": 0.0,
            "commitsBetweenForRepo": 1,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,27 +1,31 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString warnTmpl = null;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\tremovePack(p);\n+\t\t} else if (e.getMessage() != null\n+\t\t\t\t&& e.getMessage().toLowerCase().contains(STALE_FILE_HANDLE_MSG)) {\n+\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n+\t\t\tremovePack(p);\n \t\t}\n \t\tif (warnTmpl != null) {\n \t\t\tif (LOG.isDebugEnabled()) {\n \t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t\t\t} else {\n \t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n \t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\t\t}\n \t\t} else {\n \t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t// transient.\n \t\t\tLOG.error(MessageFormat.format(\n \t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n \t\t\t\t\t\t\t.getAbsolutePath()), e);\n \t\t}\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\tremovePack(p);\n\t\t} else if (e.getMessage() != null\n\t\t\t\t&& e.getMessage().toLowerCase().contains(STALE_FILE_HANDLE_MSG)) {\n\t\t\twarnTmpl = JGitText.get().packHandleIsStale;\n\t\t\tremovePack(p);\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t\tLOG.error(MessageFormat.format(\n\t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n\t\t\t\t\t\t\t.getAbsolutePath()), e);\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "1"
        },
        "d3a73c1407f8936cb45516da8d3a2d4dd43c6379": {
            "type": "Ybodychange",
            "commitMessage": "Lower log level to warn for handled pack errors\n\nPack not found and pack corrupted/invalid are handled by the code (pack\nis removed from the list) so logging an error and the stacktrace is\nmisleading because it implies that there is an action to take to fix the\nerror.\n\nLower the log level to warn and remove the stacktrace for those 2 types\nof errors and keep the error log statement for any other.\n\nChange-Id: I2400fe5fec07ac6d6c244b852cce615663774e6e\nSigned-off-by: Hugo Ar\u00e8s <hugo.ares@ericsson.com>\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>",
            "commitDate": "30/04/15 7:21 AM",
            "commitName": "d3a73c1407f8936cb45516da8d3a2d4dd43c6379",
            "commitAuthor": "Hugo Ar\u00e8s",
            "commitDateOld": "16/02/15 4:06 PM",
            "commitNameOld": "c18694e0d1c122a2f95537fd9254fb075d2e0bc2",
            "commitAuthorOld": "Matthias Sohn",
            "daysBetweenCommits": 72.59,
            "commitsBetweenForRepo": 112,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,18 +1,27 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n-\t\tString tmpl;\n+\t\tString warnTmpl = null;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n-\t\t\ttmpl = JGitText.get().corruptPack;\n+\t\t\twarnTmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n-\t\t\ttmpl = JGitText.get().packWasDeleted;\n+\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n \t\t\tremovePack(p);\n+\t\t}\n+\t\tif (warnTmpl != null) {\n+\t\t\tif (LOG.isDebugEnabled()) {\n+\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n+\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n+\t\t\t} else {\n+\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n+\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n+\t\t\t}\n \t\t} else {\n-\t\t\ttmpl = JGitText.get().exceptionWhileReadingPack;\n \t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t// transient.\n+\t\t\tLOG.error(MessageFormat.format(\n+\t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n+\t\t\t\t\t\t\t.getAbsolutePath()), e);\n \t\t}\n-\t\tLOG.error(MessageFormat.format(tmpl,\n-\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString warnTmpl = null;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\twarnTmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\twarnTmpl = JGitText.get().packWasDeleted;\n\t\t\tremovePack(p);\n\t\t}\n\t\tif (warnTmpl != null) {\n\t\t\tif (LOG.isDebugEnabled()) {\n\t\t\t\tLOG.debug(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t\t\t} else {\n\t\t\t\tLOG.warn(MessageFormat.format(warnTmpl,\n\t\t\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\t\t}\n\t\t} else {\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t\tLOG.error(MessageFormat.format(\n\t\t\t\t\tJGitText.get().exceptionWhileReadingPack, p.getPackFile()\n\t\t\t\t\t\t\t.getAbsolutePath()), e);\n\t\t}\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "1",
            "TangledWMoveandFileRename": "1"
        },
        "c18694e0d1c122a2f95537fd9254fb075d2e0bc2": {
            "type": "Ybodychange",
            "commitMessage": "Use slf4j to log instead of printing to System.err\n\nCQ: 9206\nBug: 458445\nChange-Id: Ic68fb7dbe0fb46bf30f157db45bf18d8f3a704c0\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>\n",
            "commitDate": "16/02/15 4:06 PM",
            "commitName": "c18694e0d1c122a2f95537fd9254fb075d2e0bc2",
            "commitAuthor": "Matthias Sohn",
            "commitDateOld": "27/01/15 3:37 PM",
            "commitNameOld": "f5936405a3a66b821f716e551de6ee4c1c33ca0b",
            "commitAuthorOld": "Matthias Sohn",
            "daysBetweenCommits": 20.02,
            "commitsBetweenForRepo": 9,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,24 +1,18 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString tmpl;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\ttmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n \t\t} else if (e instanceof FileNotFoundException) {\n \t\t\ttmpl = JGitText.get().packWasDeleted;\n \t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttmpl = JGitText.get().exceptionWhileReadingPack;\n \t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t// transient.\n \t\t}\n-\t\tStringBuilder buf = new StringBuilder(MessageFormat.format(tmpl,\n-\t\t\t\tp.getPackFile().getAbsolutePath()));\n-\t\tStringWriter sw = new StringWriter();\n-\t\te.printStackTrace(new PrintWriter(sw));\n-\t\tbuf.append('\\n');\n-\t\tbuf.append(sw.toString());\n-\t\t// TODO instead of syserr we should use a logging framework\n-\t\tSystem.err.println(buf.toString());\n+\t\tLOG.error(MessageFormat.format(tmpl,\n+\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString tmpl;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\ttmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\ttmpl = JGitText.get().packWasDeleted;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttmpl = JGitText.get().exceptionWhileReadingPack;\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t}\n\t\tLOG.error(MessageFormat.format(tmpl,\n\t\t\t\tp.getPackFile().getAbsolutePath()), e);\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "5"
        },
        "f5936405a3a66b821f716e551de6ee4c1c33ca0b": {
            "type": "Ybodychange",
            "commitMessage": "If a pack isn't found on disk remove it from pack list\n\nIf accessing a pack throws FileNotFoundException the pack was deleted\nand we need to remove it from the pack list. This can be caused e.g. by\ngit gc.\n\nChange-Id: I5d10f87f364dadbbdbfb61b6b2cbdee9c7457f3d\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>\n",
            "commitDate": "27/01/15 3:37 PM",
            "commitName": "f5936405a3a66b821f716e551de6ee4c1c33ca0b",
            "commitAuthor": "Matthias Sohn",
            "commitDateOld": "20/01/15 5:14 PM",
            "commitNameOld": "27ee3342136a588adbc1eee4b333179d8f6f1aa7",
            "commitAuthorOld": "Matthias Sohn",
            "daysBetweenCommits": 6.93,
            "commitsBetweenForRepo": 9,
            "commitsBetweenForFile": 1,
            "diff": "@@ -1,21 +1,24 @@\n \tprivate void handlePackError(IOException e, PackFile p) {\n \t\tString tmpl;\n \t\tif ((e instanceof CorruptObjectException)\n \t\t\t\t|| (e instanceof PackInvalidException)) {\n \t\t\ttmpl = JGitText.get().corruptPack;\n \t\t\t// Assume the pack is corrupted, and remove it from the list.\n \t\t\tremovePack(p);\n+\t\t} else if (e instanceof FileNotFoundException) {\n+\t\t\ttmpl = JGitText.get().packWasDeleted;\n+\t\t\tremovePack(p);\n \t\t} else {\n \t\t\ttmpl = JGitText.get().exceptionWhileReadingPack;\n \t\t\t// Don't remove the pack from the list, as the error may be\n \t\t\t// transient.\n \t\t}\n \t\tStringBuilder buf = new StringBuilder(MessageFormat.format(tmpl,\n \t\t\t\tp.getPackFile().getAbsolutePath()));\n \t\tStringWriter sw = new StringWriter();\n \t\te.printStackTrace(new PrintWriter(sw));\n \t\tbuf.append('\\n');\n \t\tbuf.append(sw.toString());\n \t\t// TODO instead of syserr we should use a logging framework\n \t\tSystem.err.println(buf.toString());\n \t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString tmpl;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\ttmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else if (e instanceof FileNotFoundException) {\n\t\t\ttmpl = JGitText.get().packWasDeleted;\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttmpl = JGitText.get().exceptionWhileReadingPack;\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t}\n\t\tStringBuilder buf = new StringBuilder(MessageFormat.format(tmpl,\n\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\tStringWriter sw = new StringWriter();\n\t\te.printStackTrace(new PrintWriter(sw));\n\t\tbuf.append('\\n');\n\t\tbuf.append(sw.toString());\n\t\t// TODO instead of syserr we should use a logging framework\n\t\tSystem.err.println(buf.toString());\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "extendedDetails": {},
            "BugCommit": "0",
            "TangledWMoveandFileRename": "1"
        },
        "27ee3342136a588adbc1eee4b333179d8f6f1aa7": {
            "type": "Yintroduced",
            "commitMessage": "Don't remove pack from pack list for problems which could be transient\n\nIf we hit a corrupt object or invalid pack remove the pack from the pack\nlist. Other IOException could be transient hence we should not remove\nthe pack from the list to avoid the problem reported on the Gerrit list\n[1]. It looks like in the reported case the pack was removed from the\npack list causing MissingObjectExceptions which disappear when the\nserver is restarted.\n\n[1] https://groups.google.com/forum/#!topic/repo-discuss/Qdmbl-YZ4NU\n\nChange-Id: I331626110d54b190e46cddc2c40f29ddeb9613cd\nSigned-off-by: Matthias Sohn <matthias.sohn@sap.com>",
            "commitDate": "20/01/15 5:14 PM",
            "commitName": "27ee3342136a588adbc1eee4b333179d8f6f1aa7",
            "commitAuthor": "Matthias Sohn",
            "diff": "@@ -0,0 +1,21 @@\n+\tprivate void handlePackError(IOException e, PackFile p) {\n+\t\tString tmpl;\n+\t\tif ((e instanceof CorruptObjectException)\n+\t\t\t\t|| (e instanceof PackInvalidException)) {\n+\t\t\ttmpl = JGitText.get().corruptPack;\n+\t\t\t// Assume the pack is corrupted, and remove it from the list.\n+\t\t\tremovePack(p);\n+\t\t} else {\n+\t\t\ttmpl = JGitText.get().exceptionWhileReadingPack;\n+\t\t\t// Don't remove the pack from the list, as the error may be\n+\t\t\t// transient.\n+\t\t}\n+\t\tStringBuilder buf = new StringBuilder(MessageFormat.format(tmpl,\n+\t\t\t\tp.getPackFile().getAbsolutePath()));\n+\t\tStringWriter sw = new StringWriter();\n+\t\te.printStackTrace(new PrintWriter(sw));\n+\t\tbuf.append('\\n');\n+\t\tbuf.append(sw.toString());\n+\t\t// TODO instead of syserr we should use a logging framework\n+\t\tSystem.err.println(buf.toString());\n+\t}\n\\ No newline at end of file\n",
            "actualSource": "\tprivate void handlePackError(IOException e, PackFile p) {\n\t\tString tmpl;\n\t\tif ((e instanceof CorruptObjectException)\n\t\t\t\t|| (e instanceof PackInvalidException)) {\n\t\t\ttmpl = JGitText.get().corruptPack;\n\t\t\t// Assume the pack is corrupted, and remove it from the list.\n\t\t\tremovePack(p);\n\t\t} else {\n\t\t\ttmpl = JGitText.get().exceptionWhileReadingPack;\n\t\t\t// Don't remove the pack from the list, as the error may be\n\t\t\t// transient.\n\t\t}\n\t\tStringBuilder buf = new StringBuilder(MessageFormat.format(tmpl,\n\t\t\t\tp.getPackFile().getAbsolutePath()));\n\t\tStringWriter sw = new StringWriter();\n\t\te.printStackTrace(new PrintWriter(sw));\n\t\tbuf.append('\\n');\n\t\tbuf.append(sw.toString());\n\t\t// TODO instead of syserr we should use a logging framework\n\t\tSystem.err.println(buf.toString());\n\t}",
            "path": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ObjectDirectory.java",
            "BugCommit": "0",
            "TangledWMoveandFileRename": "0"
        }
    },
    "file": "4749.json"
}